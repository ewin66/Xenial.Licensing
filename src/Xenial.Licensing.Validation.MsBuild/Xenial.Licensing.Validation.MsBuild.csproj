<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <VersionPrefix>0.1.0</VersionPrefix>
    <VersionSuffix>build-$([System.DateTime]::Now.ToString('yymmddHHmmss'))</VersionSuffix>
    <!--
      This changes the default folder where assemblies will be placed in the package.
      The default is 'lib', but that is incorrect since these assemblies are mean to be used
      by MSBuild, and to meant to be referenced as API from the NuGet package.
    -->
    <BuildOutputTargetFolder>tools</BuildOutputTargetFolder>
    <!-- For the sake of demoing, put the package output into a parent folder -->
    <PackageOutputPath>..\artifacts\packages</PackageOutputPath>
    <DisableImplicitFrameworkReferences>true</DisableImplicitFrameworkReferences>
    <TargetFrameworks>netstandard2.0;net472</TargetFrameworks>
    <!-- Compiling for .NET Framework on non-Windows systems is not yet supported-->
    <TargetFrameworks Condition="'$(OS)' != 'Windows_NT'">netstandard2.0</TargetFrameworks>
    <NoWarn>NU5128;$(NoWarn)</NoWarn>
    <GeneratePackageOnBuild>true</GeneratePackageOnBuild>
  </PropertyGroup>

  <ItemGroup>
    <!--
      PrivateAssets="All" is essential. This prevents these build-only dependencies
      from ending up in the NuGet package's list of dependencies.
     -->
    <PackageReference Include="ILMerge.Fody" Version="1.14.0" PrivateAssets="All" />
    <PackageReference Include="NETStandard.Library" Version="2.0.3" PrivateAssets="All" />
    <PackageReference Include="Microsoft.Build.Framework" Version="16.8.0" PrivateAssets="All" />
    <PackageReference Include="Microsoft.Build.Tasks.Core" Version="16.8.0" PrivateAssets="All" />
    <PackageReference Include="Microsoft.Build.Utilities.Core" Version="16.8.0" PrivateAssets="All" />
    <PackageReference Include="Standard.Licensing" Version="1.1.5" PrivateAssets="All" />
  </ItemGroup>
  
  <ItemGroup>
    <Content Include="build\**\*" PackagePath="build\" />
  </ItemGroup>

</Project>
